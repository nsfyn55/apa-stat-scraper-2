#compdef apa-stat-scraper
# APA Stat Scraper zsh completion script

_apa_stat_scraper() {
    local context state line
    typeset -A opt_args

    _arguments -C \
        '1: :->actions' \
        '*::arg:->args'

    case $state in
        actions)
            _values 'actions' \
                'login[Authenticate with APA website]' \
                'verify-session[Check if session is valid]' \
                'clear-state[Clear stored session data]' \
                'extract-player[Extract player statistics]' \
                'extract-team[Extract team statistics]' \
                'cache-manage[Manage application cache]'
            ;;
        args)
            case $line[1] in
                login)
                    _arguments \
                        '--email[Email address for login]:email:' \
                        '--password[Password for login]:password:' \
                        '--launch-browser[Launch browser window (default: headless mode)]'
                    ;;
                verify-session)
                    _arguments \
                        '--launch-browser[Launch browser window (default: headless mode)]'
                    ;;
                clear-state)
                    _arguments \
                        '--confirm[Skip confirmation prompt]'
                    ;;
                extract-player)
                    _arguments \
                        '--userid[UserId of the player]:userid:' \
                        '--url[URL of the player page]:url:_urls' \
                        '--league[League name to use]:league:' \
                        '--output[Output file path]:file:_files -g "*.{json,csv}"' \
                        '--format[Output format]:format:(json csv)' \
                        '--launch-browser[Launch browser window (default: headless mode)]' \
                        '--no-terminal[Suppress terminal output]' \
                        '--no-cache[Skip cache and force fresh data extraction]'
                    ;;
                extract-team)
                    _arguments \
                        '--team-id[Team ID of the team]:team_id:' \
                        '--league[League name to use]:league:' \
                        '--output[Output file path]:file:_files -g "*.{json,csv}"' \
                        '--format[Output format]:format:(json csv)' \
                        '--launch-browser[Launch browser window (default: headless mode)]' \
                        '--no-terminal[Suppress terminal output]' \
                        '--expand[Expand player data with detailed statistics]' \
                        '--no-cache[Skip cache and force fresh data extraction]'
                    ;;
                cache-manage)
                    _arguments \
                        '1: :->cache_actions' \
                        '*::arg:->cache_args'
                    ;;
            esac
            ;;
        cache_actions)
            _values 'cache actions' \
                'stats[Show cache statistics]' \
                'clear[Clear cache entries]' \
                'cleanup[Clean up expired cache files]'
            ;;
        cache_args)
            case $line[1] in
                clear)
                    _arguments \
                        '--all[Clear all cache files]' \
                        '--specific[Clear specific cache entry]' \
                        '--action-type[Type of action to clear cache for]:action_type:(player team)' \
                        '--identifier[Identifier to clear cache for]:identifier:' \
                        '--league[League to clear cache for]:league:' \
                        '--expand[Clear expanded cache entries only]'
                    ;;
            esac
            ;;
    esac
}

_apa_stat_scraper "$@"
